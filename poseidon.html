	<!DOCTYPE html>
	<html lang="en">

	<head>
		<!-- Meta, title, CSS, favicons, etc. -->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">
		<meta property="og:title" content="Ripple">
		<meta property="og:url" content="www.getkefi.com">

		<!--Google Maps and Google Places APIs-->

		<!--<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&key=AIzaSyAWf1WnMo_4s35yeXZ-kZyF-QZ7m5MwqP0"></script>
		<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true"></script>-->

		<!-- bootstrap -->
		<link type="text/css" href="main.css" rel="stylesheet"/>
		<link rel="shortcut icon" href="http://www.getripple.io/rippleHeaderLogo.png">
		<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
		<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
		<script src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>
		<script src="http://timeago.yarp.com/jquery.timeago.js"></script>
		<!--simulator files -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
		<script src="Model.js"></script>
		<script src="simulatorSetup.js"></script>



		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

		<!--load google fonts!-->
		<link href='http://fonts.googleapis.com/css?family=Roboto:100' rel='stylesheet' type='text/css'>

		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>

		<!--Styling for spread and dismiss buttons-->
		



		<title>Ripple</title>

		<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-49651565-1', 'getkefi.com');
		ga('send', 'pageview');

		</script>
	</head>

	<body align=>
		<!--header-->
		<div class="topHeader" style="background-color:#0867ab; padding-bottom:5px;" >
			<div class = "picText" style="background-color:#0867ab;">
				<div style="width:45%;float:left;">
					<a href="http://getRipple.io"><img class="rippleImg" id="rippleImg" src="rippleBlueBcknd.png" style="float:left;" width="100px"></a>
					<p class="headerText" style="color:#fff;"></p>	
				</div>

				<div class="socialMedia">
					<span style="padding-right: 15px"><a href="https://twitter.com/RippleMeThis"><img class="socialMediaBtn" href src="http://i.imgur.com/h7oyTeL.png?1" ></a></span>

					<span style="padding-right: 15px"><a href="https://www.facebook.com/exploreRipple"><img class="socialMediaBtn" href src="http://i.imgur.com/CtfEYps.png?1" ></a></span>

					<a href="http://instagram.com/ripple.app"><img class="socialMediaBtn" href src="http://i.imgur.com/w90mpS8.png?1" ></a>
				</div>
			</div>
		</div>


		<div class="explanation" style="width:75%; font-family:'Roboto'; padding-bottom:px; margin: 0 auto; font-weight:100"align=>
				

				<!--<p align="center" style="font-size:50px;color:#0867ab">Ripple</br></br></p>-->
				<p class="headline" align="center" style="margin-top:10px;">Ripple | Explore Your World</p>

				<p align="center" class="explanation"> You have thoughts, photos, and stories to share.<br>We're on a mission to ripple the best of it to people around the world.</p>

				<div style="width:100%; margin:0 auto;" align="center"><img src="MyWorld.jpg
					" width="80%"></img>
		</div></br>

			
		
		<hr size="10" style="border-top: 1px solid #0867ab;">

				<p class="opener" align="center">What is Ripple?</p>
				<p>Ripple is a geolocation based social app where people can reach others beyond any boundary or social cluster. People post, or start a "ripple," and others continue to spread the ripple if they like it. <b>Eventually, the best ripples travel to people around the world, and users can see where each ripple travels.</b>


		
		<div class="mainRipple" style="margin:0px 0px 0px 30px;" align="center">


			<div class="mainInnerRipple" id="InnerRipple" style="width:40%; margin:40px 10px 0px 0px; border-radius:25px; background-color:#fff;">


				<img id="ripple_image" style="margin:0 auto; display:block;" width="100%">
				<div id="ripple_num_propagated" style="margin:0 auto; background:#055a93; color:#fff;"></div>
					<p id="ripple_text" style="width:100; margin:0 auto; font-family:sans-serif; font-weight:100;" ></p>
					</br>
				
				<div class="metadata">
				
					<div style="color:#777; float:left;"><span style="color:#055a93;"><b id="ripple_creator"></b></span>&nbsp; &nbsp;<span id="ripple_location"></span>
					</div>
					<div id="ripple_created_at" style="float:right; color:#777">
					</div>	
				</div>

				</br>


				<hr>
			
			</div>

			</br></br>

			
			<div style="margin:30 auto; border-radius:25px;" id="map-canvas" align="center" ></div>

		</div>

			
		<br><br><p class="caseStudy" align="center"><i>Drew rippled a picture of himself in Utah, and people near him spread it. His follower in Germany decided to spread it to people around her too. Drew’s picture began to travel throughout the US and Europe simultaneously. Eventually, it rippled around the entire world.</i></p></br></br>			
				

		<hr size="10" style="border-top: 1px solid #0867ab;">


		<p class="opener" align="center">How it works</p>
		<p id="describe">
			1. Ripplers start posts - or "ripples". They initially spread to friends and other people geographically nearby.<br><br>
			2. Those who receive the ripples can spread it to others near them if they like it.<br><br>
			3. Ripples spread so long as people continue to spread them, so that relevant content spreads around the world.</b>
		</p>


		<div class="screenshots" style=" padding:20px" align="center" >
				<img src="http://i.imgur.com/dQ4OhZB.jpg?1" width="24%">
				<img src="http://i.imgur.com/Oq096KN.jpg" width="24%">
				<img src="http://i.imgur.com/2UIGuQd.jpg?1" width="24%">
				<img src="http://i.imgur.com/0FfYlgF.jpg" width="24%">
		</div>


		

		  		<!-- Controls -->
			  	<!--<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
			    	<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
			    	<span class="sr-only">Previous</span>
			  	</a>
			  	<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
			    	<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
			    	<span class="sr-only">Next</span>
			  	</a>
			</div>
		</div>-->

		<!--<div class="howitworks" align="center" text-align="left">
				<div class="floats">
					<br><br>
					<div class="floatleft" id="describe"><p>Discover ripples from people nearby and all over the world. You can spread these ripples or dismiss them.</p>

					<p  class="shots" align="center"><img src="http://i.imgur.com/cCW5XIu.png" width="100%" align=""></p>
					</div>
				
					
					<div class="floatright" id="describe"><p>Each ripple has a map showing where the ripple has been spread</p> 
						<p class="shots" align="center"><img src="http://i.imgur.com/kUgFNTQ.png" width="100%" align="center"></p>
						</div>
				</div>
			</br></br></br></br></br></br></br>

				<div class="floats">
					<div class="floatleft" id="describe"><p>Explore the most engaging ripples to see where they've traveled across the globe</p>
					<p  class="shots" align="center"><img src="http://i.imgur.com/QOCsYxL.png"width="100%" align="center"><p></div>
				
					<div class="floatright" id="describe" ><p>du ma mai</p>
					<p class="shots" align="center"><img src="http://i.imgur.com/PMD706c.png" width="100%"></p></div>
				</div>
				</div> 

			-->
				
				<!-- <p align="left">Ripplers post and receive messages and pictures, and can spread them to friends and people geographically nearby. <br><br>(PIC 1)Those who receive the post — or “ripple” — can spread it to others near them, and so on. <br><br> (PIC2)Ripples spread so long as people continue to spread them, so that the most relevant content spreads around the world. <!-- Because ripples only travel far and wide via a random set of diverse people, they are more likely to appeal to the majority of our users.</p>--></br></br></br></br>

				<!--<ul>
					<li>It helps them expose their content to new communities all over the world.</li>
					<li>It feeds them personalized content based on who they follow, location, and time. (and also allows them to feel the thrill of discovering new random feeds..something along this line)</li>
					<li>It lets them visualize how content spreads.</li>
				</ul>-->
		
				

			
		<hr size="10" style="border-top: 1px solid #0867ab;"></br>

				<p class="opener" align="center">Why Ripple?</p><br/>
				
				<p class="factor">Reach new audiences.</p>
					<p>Ripple doesn't restrict your network. Ripplers spread content to people nearby and around the world so that posts spread to new people in different new communities.</p><br>
						
				<p class="factor">Visualize impact</p>
					<p>Likes, retweets, upvotes, etc are 1-dimensional measures of engagement. Each ripple visualizes on a map how many times it was spread, where it has traveled to, and how it got there.</p><br>	
			 	

				<p class="factor">Surface engaging content</p>
					<p>Content only travels so far and so long as it is relevant. Eventually, engaging content spreads around the globe and is discovered by more people, while "noise" doesn't travel far.Since posts reach people outside a user’s personal network, Ripplers are constantly sharing and discovering ripples from across the globe.</p>
						<!--<br/>Likes, retweets, upvotes, etc are untelling measurements of impact.-->
					
			


	<hr size="10" style="border-top: 1px solid #0867ab;"></br>
</div>


		<!--<div class="explanation" style="width:75%; font-family:'Roboto'; padding-bottom:px; margin: 0 auto;font-weight:100" align=>
				<p class="opener"align="center">People Love Ripple Because:</p></br>
			
				<ul>
					<li>It helps them expose their content to new communities all over the world.</li>
					<li>It feeds them personalized content based on who they follow, location, and time.</li>
					<li>It lets them visualize how content spreads.</li>
				</ul>
				
		</div> -->

			
		</br>

		<!-- <div class="explanation" style="width:75%; font-family:'Roboto'; padding-bottom:px; margin: 0 auto;font-weight:100" align=>
				
				<p>With Ripple:</p><br/>
				<ul>
					<li>Start a post, or "ripple," to reach audiences around the world </li>
					<li>Spread posts you like to new people near you </li>
					<li>Receive only relevant content that's spread to you</li>
					<li>Check your map to see where and how your ripples spread</li>
					<li>Explore and spread trending ripples</li>
					<li>Follow people to see and spread their ripples</li>
					<li>Reach more people as you earn points</li>
							
					
				</ul>
				<p class="explanation" style="color=#0867ab;font-size:30px"><a href="http://www.getripple.io/howitworks.html">Learn More</a></p>
		</div></br>-->


			<div class="featuredBar">
				<p class ="featureBarTitle" align="center">As seen on:</p>
				<table class="featuredTable">
					<tr>
						<td><a href="http://www.geekwire.com/2015/ripple/" target="_blank"><img class="featuredImg" id="geekwire" src="geekwire.png" width="20%"></a></td>

						<td><a href="http://www.cnbc.com/2015/08/21/the-social-media-start-up-for-the-little-guys.html" target="_blank"><img class="featuredImg" id="cnbc" src="cnbc-logo-grayscale.png" width="40%"></a></td>

						<td><a href="http://bostinno.streetwise.co/2015/07/15/ripple-harvard-grad-launches-free-app-to-spread-content/" target="_blank"><img class="featuredImg" id="rayw" src="bostinno.png" width="100%"></a></td>

				
					</tr>
				</table>
			</div>

	<!-- trending ripples -->
		<div class="trendingRipples" style="background-color:#eee;font-weight:100">
			<div class="trendingText" style="font-family:'Roboto', sans-serif;">
				<p class="topRippleTxt" align="center" style="color:#0867ab">Trending Ripples:</p>
			</div>	

			<div id="ripple_div1" class="ripple" style="padding:10px 5px 20px 5px; margin-top:80px;">

				<div class="innerRipple" style="width:60%; margin:0 auto; border-radius:25px;">
					
					<img id="ripple_image1" style="margin:0 auto; display:block;" width="100%">

					<div id="ripple_num_propagated1" style="padding:5px 5px 5px 8px; background:#055a93; color:#fff; height:30px"></div>

					<p class="ripple_text" id="ripple_text1" style="width:100; margin: 0auto; font-family:sans-serif; font-weight:100; padding-top:10px" ></p>
					
					<br/><br/>
					
					<div class="metadata">
						<div style="color:#777; float:left;"><span style="color:#055a93;"><b id="ripple_creator1"></b></span>&nbsp; &nbsp;<span id="ripple_location1"></span></div>
						<div id="ripple_created_at1" style="float:right; color:#777"></div>	
					</div>
				</div>

					<br/>
					<br/>
					
			</div> 

			<!--<Ripple Two -->
			<div id="ripple_div2" class="ripple" style="padding:10px 5px 20px 5px; margin-top:80px;">

				<div class="innerRipple" style="width:60%; margin:0 auto; border-radius:25px;">
					
					<img id="ripple_image2" style="margin:0 auto; display:block;" width="100%">

					<div id="ripple_num_propagated2" style="padding:5px 5px 5px 8px; background:#055a93; color:#fff; height:30px"></div>

					<p class="ripple_text" id="ripple_text2" style="width:100; margin:0 auto; font-family:sans-serif; font-weight:100; padding-top:10px" ></p>
					
					<br/><br/>
					
					<div class="metadata">
						<div style="color:#777; float:left;"><span style="color:#055a93;"><b id="ripple_creator2"></b></span>&nbsp; &nbsp;<span id="ripple_location2"></span></div>
						<div id="ripple_created_at2" style="float:right; color:#777"></div>	
					</div>
				</div>

					<br/>
					<br/>
					
			</div> 

			<!--<Ripple Three -->
			<div id="ripple_div3" class="ripple" style="padding:10px 5px 20px 5px; margin-top:80px;">

				<div class="innerRipple" style="width:60%; margin:0 auto; border-radius:25px;">
					
					<img id="ripple_image3" style="margin:0 auto; display:block;" width="100%">

					<div id="ripple_num_propagated3" style="padding:5px 5px 5px 8px; background:#055a93; color:#fff;height:30px"></div>

					<p class="ripple_text" id="ripple_text3" style="width:100; margin:0 auto; font-family:sans-serif; font-weight:100; padding-top:10px"></p>
					
					<br/><br/>
					
					<div class="metadata">
						<div style="color:#777; float:left;"><span style="color:#055a93;"><b id="ripple_creator3"></b></span>&nbsp; &nbsp;<span id="ripple_location3"></span></div>
						<div id="ripple_created_at3" style="float:right; color:#777"></div>	
					</div>
				</div>

					<br/>
					<br/>
					
			</div>

			<!-- Ripple Four -->
			<div id="ripple_div4" class="ripple" style="padding:10px 5px 20px 5px; margin-top:80px;">

				<div class="innerRipple" style="width:60%; margin:0 auto; border-radius:25px;">
					
					<img id="ripple_image4" style="margin:0 auto; display:block;" width="100%">

					<div id="ripple_num_propagated4" style="padding:5px 5px 5px 8px; background:#055a93; color:#fff;height:30px"></div>

					<p class="ripple_text" id="ripple_text4" style="width:100; margin:0 auto; font-family:sans-serif; font-weight:100; padding-top:10px" ></p>
					
					<br/><br/>
					
					<div class="metadata">
						<div style="color:#777; float:left;"><span style="color:#055a93;"><b id="ripple_creator4"></b></span>&nbsp; &nbsp;<span id="ripple_location4"></span></div>
						<div id="ripple_created_at4" style="float:right; color:#777"></div>	
					</div>
				</div>

					<br/>
					<br/>
					
			</div> 


			<!-- Ripple Five -->
			<div id="ripple_div5" class="ripple" style="padding:10px 5px 20px 5px; margin-top:80px;">

				<div class="innerRipple" style="width:60%; margin:0 auto; border-radius:25px;">
					
					<img id="ripple_image5" style="margin:0 auto; display:block;" width="100%">

					<div id="ripple_num_propagated5" style="padding:5px 5px 5px 8px; background:#055a93; color:#fff;height:30px"></div>

					<p class="ripple_text" id="ripple_text5" style="width:100; margin:0 auto; font-family:sans-serif; font-weight:100; padding-top:10px" ></p>
					
					<br/><br/>
					
					<div class="metadata">
						<div style="color:#777; float:left;"><span style="color:#055a93;"><b id="ripple_creator5"></b></span>&nbsp; &nbsp;<span id="ripple_location5"></span></div>
						<div id="ripple_created_at5" style="float:right; color:#777"></div>	
					</div>
				</div>

					<br/>
					<br/>
					
			</div>
		</div> 



		

		<!--<div class="explanation" style="width:100%; font-family:'Roboto'; padding-bottom:50px; margin: 0 auto; align=center">
				<p align="center">Ready to share and discover more? only on<a href="http://getRipple.io">Ripple</a><br/><br/><a href="http://getRipple.io/howitworks.html">See how it works</a></p>
				
				<div class="actions" style="margin:0 auto; width:100%;"> 
					<a href="https://itunes.apple.com/us/app/ripple-spread-your-thoughts/id946792245?ls=1&mt=8"><img class="ios" src="Download_on_the_App_Store_Badge_US-UK_135x40.png"></a>&nbsp; &nbsp;
					<a href="https://play.google.com/store/apps/details?id=com.KefiLabs.Ripple"> <img class="android" alt="Get it on Google Play" src="http://i.imgur.com/pWic5cg.png?1" /></a>
				</div>

			</div>-->

	<style>
	/*style for simulator */
	rect {
	 fill: none;
	 pointer-events: all;
	 stroke-width:5;
	 border-radius: 25px;
	}

	circle {
	 fill: blue;
	 stroke-width: 2.5px;
	}
	</style>

	<script>



	function getParameterByName(name) {
		name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
		var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
		results = regex.exec(location.search);
		return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}



	function drawLine(latitude, longitude, miniRipple, map) {
		console.log("drawing line");
		var lineCoordinates = [
			new google.maps.LatLng(latitude, longitude),
			new google.maps.LatLng(miniRipple["geoPoint"].latitude, miniRipple["geoPoint"].longitude)
		];

		var strokecolor = "#999"

		if (miniRipple["isFirstWave"]) 
			strokecolor ="#a31efc"



		var linePath = new google.maps.Polyline({
	    path: lineCoordinates,
	    geodesic: true,
	    strokeColor: strokecolor,
	    strokeOpacity: 1.0,
	    strokeWeight: 2,
	    zIndex: 0
	  });


	  linePath.setMap(map);
	}

	function initialize(latitude, longitude, graph) {
	  // Create the map.
	  var mapOptions = {
	    zoom: 2,
	    center: new google.maps.LatLng(latitude, longitude),
	    mapTypeId: google.maps.MapTypeId.ROADMAP
	  };

	  var map = new google.maps.Map(document.getElementById('map-canvas'),
	      mapOptions);

	  // Add the lines ------------------
	  /*var frontier = [];

	  for (var i = 0; i < graph.length; i++)
	  {
	  	var miniRipple = graph[i];
	  	if (miniRipple["isFirstWave"])
	  	{
	  		frontier.push(miniRipple);
	  		miniRipple["depth"] = 1;
	  		drawLine(latitude, longitude, miniRipple, map);
	  	}
	  }

	  while (frontier.length > 0)
	  {
	  	var miniRipple = frontier[0];
	  	for (var i = 0; i < miniRipple["children"].length; i++)
	  	{
	  		var child = miniRipple["children"][i];
	  		for (var j = 0; j < graph.length; j++)
	  		{
	  			var nextMiniRipple = graph[j];
	  			if (child == nextMiniRipple["miniRippleId"])
	  			{
	  				frontier.push(nextMiniRipple);
	  				nextMiniRipple.depth = miniRipple.depth + 1;
	  				//TODO: if nextMiniRipple.deth > max -> Increase
	  				drawLine(miniRipple["geoPoint"].latitude, miniRipple["geoPoint"].longitude, nextMiniRipple, map);

	  				break;
	  			}
	  		}
	  	}
	  	frontier.splice(0,1);
	  } */


	  // Construct the circle for each value in citymap.
	  // Note: We scale the area of the circle based on the population.
	  for (var i = 0; i < graph.length; i++) {
	  	var miniRipple = graph[i];

	    var populationOptions = {
	      strokeColor: '#055a93',
	      strokeOpacity: 0.9,
	      strokeWeight: 1,
	      fillColor: '#055a93',
	      fillOpacity: 0.6,
	      map: map,
	      center: new google.maps.LatLng(miniRipple["geoPoint"].latitude, miniRipple["geoPoint"].longitude),
	      radius: 200000,
	      zIndex: 1
	    };
	    // Add the circle for this city to the map.
	    cityCircle = new google.maps.Circle(populationOptions);

	    console.log("drawing circle");
	  }


	  // Add ripple ground zero
	  var populationOptions = {
	      strokeColor: '#a31efc',
	      strokeOpacity: 0.9,
	      strokeWeight: 1,
	      fillColor: '#a31efc',
	      fillOpacity: 0.9,
	      map: map,
	      center: new google.maps.LatLng(latitude, longitude),
	      radius: 200000,
	      zIndex: 2
	    };
	    // Add the circle for this city to the map.
	    cityCircle = new google.maps.Circle(populationOptions);

	    console.log("drawing ground zero circle");
	}


	$(document).ready(function() {

		Parse.initialize("NYPXQtFR0BBY0TEbfcpgn61l2IGHJXQkrY1bu8PM", "5CS8buPIcMHVrSIeJuzPNkrVpjQsy9l6D2bvw5Aw");



		setHeaderSize();

		

		var rippleId = 'jCxcnkO1gd';

		var Ripple = Parse.Object.extend("Ripple");
		var query = new Parse.Query(Ripple);
		query.get(rippleId, {
			success: function(ripple) {
				    // The object was retrieved successfully.
				    
				    $("#ripple_text").text(ripple.get("text"));

				    if (ripple.get("image"))
				    {
				    	$("#ripple_image").attr("src", ripple.get("image").url());

				    	//set heights
				    	var image_height = $("#ripple_image").width() * ripple.get("imageHeight")/ripple.get("imageWidth");
				 	   $("#map-canvas").css("height", 210 + image_height);
				 	   //alert(ripple.get("imageHeight")/ripple.get("imageWidth"));
					}

				    else
				    {
				    	$('#ripple_text').css("border", "1px solid #ccc");
				    	$('#ripple_text').css("padding","10px");
				    	$("#map-canvas").css("height", 50 + $(".mainInnerRipple").height());
				    }

				    $("#ripple_num_propagated").text("spread " + ripple.get("numPropagated") + " times");
				    $("#ripple_creator").text(ripple.get("creatorName"));

				    if (ripple.get("city"))
				    {
				    	if (ripple.get("state"))
				    		$("#ripple_location").text(ripple.get("city") + ", " + ripple.get("state"));
				    	else
				    		$("#ripple_location").text(ripple.get("city"));
				    }
				    
				    $("#ripple_created_at").text($.timeago(ripple.createdAt));

				    var geoPoint = ripple.get("startLocation");


				    Parse.Cloud.run('getMiniRipplesGraph', { rippleId: rippleId }, {
					  success: function(graph) {
					    google.maps.event.addDomListener(window, 'load', initialize(geoPoint.latitude, geoPoint.longitude, graph));
					  },
					  error: function(error) {
					  }
					});	

				    /*Parse.Cloud.run('getCommentsForRipple', { rippleId: rippleId }, {
				    	success: function(commentList) {

				    		if (commentList.length == 0)
				    			$('.comments').css("visibility","hidden");

				    		else
				    		{
					    		for (var i = 0; i < commentList.length; i++)
					    		{
					    			var comment = commentList[i];
					    			var firstRow = '<tr><td><hr style="border-top:1px solid #fff;margin:10px 0 20px 0;" size="0"><p class="commentText" style="font-family: sans-serif; font-weight: 100;">' + comment["comment"] + '</p><br/><br/>';

					    			var secondRow = '<span style="float:left;margin-left:10px;color:#777;">' + comment["username"];

					    			if (comment["city"] == null)
					    			{
					    				secondRow = secondRow + '</span><span style="float:right;margin-right:10px;color:#777;">' + $.timeago(comment["createdAt"]) + '</td></tr>';
					    			}
					    			else
					    			{
					    				secondRow =  secondRow + "&nbsp; &nbsp; &nbsp;"+comment["city"] + '</span><span style="float:right;margin-right:10px;color:#777">'  + $.timeago(comment["createdAt"]) + '</td></tr>';
					    			}


					    			
					    			$('#commentTable').append(firstRow + secondRow);
					    		}
					    	}
				    	},
				    	error: function(error) {

				    	}
				    });*/



				},
				error: function(object, error) {
				    // The object was not retrieved successfully.
				    // error is a Parse.Error with an error code and message.
				    alert('error');
				}
			})	;

			// get trending ripples
			Parse.Cloud.run('getTopRipplesForWebsite', {}, {
				success: function(topRipples) 
				{
					for (var i = 0; i < 5; i++)
					{
						var ripple = topRipples[i];
						var rippleNumber = (i+1).toString();

						
						$('#ripple_div' + rippleNumber).attr('onclick', "location.href='http://www.getripple.io/poseidon.html?id=" + ripple["rippleId"] + "'");

						$("#ripple_text" + rippleNumber).text(ripple["text"]);

					    if (ripple["image"])
					    	$("#ripple_image" + rippleNumber).attr("src", ripple["image"].url());

					    else
					    {
					    	$('#ripple_text' + rippleNumber).css("border", "1px solid #ccc");
					    	$('#ripple_text' + rippleNumber).css("padding","10px");
					    }

					    $("#ripple_num_propagated" + rippleNumber).text("spread " + ripple["numPropagated"] + " times");
					    $("#ripple_creator" + rippleNumber).text(ripple["creatorName"]);

					    if (ripple["city"])
					    {
					    	if (ripple["state"])
					    		$("#ripple_location" + rippleNumber).text(ripple["city"] + ", " + ripple["state"]);
					    	else
					    		$("#ripple_location" + rippleNumber).text(ripple["city"]);
					    }
					    
					    $("#ripple_created_at" + rippleNumber).text($.timeago(ripple["createdAt"]));
					}
				},
				error: function(error) {

				}
			});	
	});





	$( window ).resize(function() {
		setHeaderSize();
	});

	function setHeaderSize()
	{
				// set logo height and width
				$('.formIframe').css({"width":$(window).width(),"height":'1500px'});

				$("footer nav ul li ").css("font-family", "'Roboto', sans-serif");
				$("footer nav ul li ").css("margin-left", "10px");

				$('.ripple').css({"background":"#eee"});
				$('body').css({"background":"#fafafa", "background-size":"100%"});
				$('.innerRipple').css({"background":"#fff", "margin-top":"20px","cursor":"pointer"});
				$('.mainRipple').css("word-wrap","break-word");


				if ($(window).width() < 700) 
				{
					// header stuff
					$('.picText').css( "height", 20);
					$('.headerText').css("padding-top","10px");
					$(".rippleImg").css({"width":"80px", "margin":"5px"});
					$('body').css({"background":"#fafafa", "background-size":"300%"});

					// social media
					$('.socialMedia').css({"float":"right","margin-right":"22px", "margin-top":"10px"});
					$('.socialMediaBtn').css({"width": "15px"});

					//ios + android image
					$(".ios").css({"width":"100px", "float":"left"});
					$('.android').css({"width":"90px", "float":"right"});
					$('.intro').css({"margin-top":"40px","font-size":"18px","height":"auto", "border":0});
					$('.explanation').css({"margin-top":"0px","font-size":"14px","margin-bottom":"40px"});
					$(".caseStudy").css("font-size","14px");
					$('.opener').css({"font-size":"25px", "margin-top":"10px"});
					$('.factor').css({"font-size":"2px"});
					$('.problem').css({"font-size":"px"});
					$('.actions').css({"width":"55%", "margin-top":"30px"});
					$('.screenshots').css({"width":"100%"});
					
					// all other content
					$('#ripple_text').css({"font-size":"18px", "padding":"10px 0px 20px 0px","text-align":"left"});
					$(".mainRipple").css({"width":"100%", "margin-left":"2px", "padding":"0px 15px 0px 15px"});
					$(".mainInnerRipple").css({"width":"99%", "padding": "15px","margin":"20 auto"});

					$(".metadata").css({"font-size":"14px", "padding-left": "4px", "height": "10px"});
					$(".mapIntro").css({"margin-top":"0px", "margin-bottom":"5px", "font-size":"15px"});
					$('#ripple_num_propagated').css({"height":"25px", "font-size":"12px", "padding":"4px 0px 0px 6px","text-align":"left"});
					$('.buttons').css({"width":"70%"});
					$('.checkitout').css({"font-size":"14px","width":"100%","text-align":"center"});
					$(".button").css({"background-color":"#fff", "border":"0","color":"#0867ab"});
					$(".modal-text").css({"background-color":"#fff", "height":"300px","border-radius":5,"background-image":'url(http://i.imgur.com/r27qQNa.jpg)', "background-size":"cover", "padding-top":"120px"})
					$('.floats').css({"width":"100%", "margin-bottom":"px", "display":"block","height":"250px",});
					$('.floatleft').css({"float":"none","width":"100%", "margin":"0 auto", });				
					$('.floatright').css({"float":"none","width":"100%", "margin":"0 auto", });


					$(".topRippleTxt").css("font-size",20);
					$("footer a").css("font-size", "10px");	

					$('#commentTable').css({"width":"100%"});	
					$('.comments').css({"width":"90%","margin":"0 auto", "font-size":"11px"});		
					$('.commentText').css({"font-size":"14px", "margin":"0px"});

					// trending ripples
					$('.trendingRipples').css("padding-top", "");
					$('.trendingText').css("font-size", "30px");
					$(".ripple").css({"width":"100%", "margin":"0 auto"});
					$(".innerRipple").css({"width":"95%", "padding": "15px"});
					$('.ripple_text').css({"margin-bottom":"10px", "font-size":"15px"});
					$('.metadata').css({"font-size":"10px"});
				}

				else
				{
					
					// header stuff
					$('.picText').css( "height", 70);
					$('.headerText').css("padding-top","25px");
					$(".rippleImg").css({"width":"170px", "padding":"5px 5px 10px 15px"});
					

					// social media
					$('.socialMedia').css({"float":"right","margin-right":"40px","margin-top":"20px"});
					$('.socialMediaBtn').css({"width": "30px"});

					//ios + android image
					$(".ios").css({"width":"180px", "float":"left"});
					$('.android').css({"width":"160px", "float":"right"});
					$('.intro').css({"margin-top":"40px","font-size":"30px","height":"auto", "border":0});
					$('.explanation').css({"margin-top":"0px","font-size":"20px","margin-bottom":"40px"});
					$(".caseStudy").css("font-size","16px");
					$('.opener').css({"font-size":"40px", "margin-top":"10px"});
					$(".headline").css({"font-size":"60px"});
					$('.factor').css({"font-size":"35px"});
					$('.problem').css({"font-size":"35px"});
					$('.actions').css({"width":"55%", "margin-top":"30px"});
					$('.floats').css({"width":"80%", "margin":"0 auto", "display":"block","height":"500px","text-align":"left"});
					$('.floatleft').css({"float":"left","width":"40%"});				
					$('.floatright').css({"float":"right","width":"40%"});
					$('#shots').css({});	
					$('#describe').css({"padding":"50px"});					
					
					
					// all other content
					$('#ripple_text').css({"font-size":"18px", "padding-bottom":"10px", "padding-top":"10px","text-align":"left"});
					$(".mainRipple").css({"width":"90%", "margin":"0 auto"});
					$(".mainInnerRipple").css({"width":"35%", "padding": "25px", "float":"left"});
					$(".metadata").css({"font-size":"16px"});
					$(".mapIntro").css({"margin-top":"50px", "margin-bottom":"20px", "font-size":"25px"});
					$('#ripple_num_propagated').css({"height":"30px", "font-size":"14px", "padding":"5px 8px 10px 8px","text-align":"left"});

					$(".button").css({"background-color":"#fff", "border":"0","color":"#0867ab"});
					$(".modal-header").css({"background-color":"#fff", "border":"0", "border-radius":5,});
					$(".modal-title").css({"font-size":"40px"});
					$(".modal-text").css({"background-color":"#fff", "height":"550px","font-size":"40px","border-radius":5,"padding-top":"250px","background-image":'url(http://i.imgur.com/r27qQNa.jpg)', "background-size":"cover"})
					//$(".modal-footer").css({"border":})
					$('#modal-subtext').css({"font-size":"20px"})
					$('#modal-footer').css({"border":"0"})
						
									
					
					
					

					$("footer a").css("font-size", "15px");	
					$(".topRippleTxt").css("font-size",30);

					$('#commentTable').css({"width":"100%"});	
					$('.comments').css({"width":"70%","margin":"0 auto", "font-size":"11px"});		
					$('.commentText').css({"font-size":"14px", "margin":"0px"});	

					// trending ripples
					$('.trendingRipples').css("padding-top", "50px");
					$('.trendingText').css("font-size", "30px");
					$(".ripple").css({"width":"85%", "margin":"0 auto"});
					$(".innerRipple").css({"width":"60%", "padding": "30px"});
					$('.ripple_text').css({"margin-bottom":"6px", "font-size":"18px"});
					$('.metadata').css({"font-size":"12px"});

					$('.carousel slide').css({"width":"50%"});
				}
			}

				// simulation
			var width = 800,
			height = 300;

			var i = 0;
			var inSimulatorView = true;

			var svg = d3.select(".simulator").append("svg")
			   .attr("width", width)
			   .attr("height", height);

			svg.append("rect")
			   .attr("width", width)
			   .attr("height", height);



			function addUserCircle(username) {
			svg.insert("circle", "rect")
			.attr("cx", width / 2.0 + (Math.random() - 0.5) * width / 1.1)
			.attr("cy", height / 2.0 + (Math.random() - 0.5) * height / 1.1)
			.attr("r", 5)
			.attr("id", "user_" + username);
			}

			function addSpreadLine(sender, receiver, hexColor) {
			var senderCircle = $("#user_" + sender);
			var receiverCircle = $("#user_" + receiver);


			svg.insert("line", "rect")
			.attr("x1", senderCircle.attr("cx"))
			.attr("y1", senderCircle.attr("cy"))
			.attr("x2", senderCircle.attr("cx"))
			.attr("y2", senderCircle.attr("cy"))
			.attr("stroke-width", 2)
			.attr("stroke", hexColor)
			 .transition()
			 .duration(2000)
			 .attr("x2", receiverCircle.attr("cx"))
			.attr("y2", receiverCircle.attr("cy"))
			 .transition()
			 .duration(10000)
			 .attr("stroke-width", 0.5)
			 .style("stroke-opacity", 0.5);
			}

			for (var i = 0; i < 300; i++) {
			var username = "user_" + i.toString();
			var user = new User(username);
			addUserCircle(user.name);
			}



			function restartSimulation()
			{
			$("svg").empty();

			startCounter = 0;
			spreadCounter = 0;
			users = [];
			ripples = [];
			// create users
			for (var i = 0; i < 300; i++) {
			var username = "user_" + i.toString();
			var user = new User(username);
			addUserCircle(user.name);
			}

			//users = [];
			// ripples = [];
			startInterval = setInterval(startRipple, 500);
			}

	   
			</script>
		</body>
		</html>
