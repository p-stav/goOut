<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	<meta property="og:image" content="http://www.getkefi.com{{STATIC_URL}}KefiSmall.png">
	<meta property="og:title" content="Kefi">
	<meta property="og:url" content="www.getkefi.com">

	<!--Google Maps and Google Places APIs-->

	<!--<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&key=AIzaSyAWf1WnMo_4s35yeXZ-kZyF-QZ7m5MwqP0"></script>
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true"></script>-->

	<!-- bootstrap -->
	{% load staticfiles %}
	<link type="text/css" href="{{STATIC_URL}}css/goOut/main.css" rel="stylesheet"/>
	<script src="{{STATIC_URL}}js/jquery.js"> </script>
	<script src="{{STATIC_URL}}css/bootstrap-3.0.0/dist/js/bootstrap.js"> </script>

	<!--load google fonts!-->
	<link href='http://fonts.googleapis.com/css?family=Roboto:400,300' rel='stylesheet' type='text/css'>

	

	<title>{% block title %}{% endblock %}</title>

		<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-49651565-1', 'getkefi.com');
	  ga('send', 'pageview');

	</script>

</head>

<body>
	<!--load heatdata -->
	<!--<script type='text/javascript'>var heatdata_uid = '1THUm2O3NOGM';</script>
	<script src="http://heatdata.com/heatdata.js"></script>-->

	<!-- Facebook code -->
	<div id="fb-root"></div>
	<script>
	  window.fbAsyncInit = function() {
	  FB.init({
	    appId      : '443646799115032',
	    status     : true, // check login status
	    cookie     : true, // enable cookies to allow the server to access the session
	    xfbml      : true  // parse XFBML
	  });

	  // Here we subscribe to the auth.authResponseChange JavaScript event. This event is fired
	  // for any authentication related change, such as login, logout or session refresh. This means that
	  // whenever someone who was previously logged out tries to log in again, the correct case below 
	  // will be handled. 
	  FB.Event.subscribe('auth.authResponseChange', function(response) {
	    // Here we specify what we do with the response anytime this event occurs. 
	    if (response.status === 'connected') {
	      // The response object is returned with a status field that lets the app know the current
	      // login status of the person. In this case, we're handling the situation where they 
	      // have logged in to the app.
	      runFBInitCriticalCode();
	    } else if (response.status === 'not_authorized') {
	      // In this case, the person is logged into Facebook, but not into the app, so we call
	      // FB.login() to prompt them to do so. 
	      // In real-life usage, you wouldn't want to immediately prompt someone to login 
	      // like this, for two reasons:
	      // (1) JavaScript created popup windows are blocked by most browsers unless they 
	      // result from direct interaction from people using the app (such as a mouse click)
	      // (2) it is a bad experience to be continually prompted to login upon page load.
	      FB.login();
	    } else {
	      // In this case, the person is not logged into Facebook, so we call the login() 
	      // function to prompt them to do so. Note that at this stage there is no indication
	      // of whether they are logged into the app. If they aren't then they'll see the Login
	      // dialog right after they log in to Facebook. 
	      // The same caveats as above apply to the FB.login() call here.
	      FB.login();
	    }
	  });
	  };

	  // Load the SDK asynchronously
	  (function(d){
	   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
	   if (d.getElementById(id)) {return;}
	   js = d.createElement('script'); js.id = id; js.async = true;
	   js.src = "//connect.facebook.net/en_US/all.js";
	   ref.parentNode.insertBefore(js, ref);
	  }(document));

    </script>




	<!-- Docs master nav -->
    <header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav">
	  <div class="navbar-header">
		<!--dropdown for account stuff-->
		<div class='btn-group'>
			<button class="navbar-toggle" type="button" data-toggle="dropdown">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<ul class="dropdown-menu mainMenu" role='menu'>
				<br/>
				{% if user.is_authenticated %}
					<!--<li><a href="/user"><span class  = 'glyphicon glyphicon-user'></span>    {{userName}}</a></li>-->
					<li><a href="/profile/{{ user.id }}"><span class='glyphicon glyphicon-user'></span><span  class="userName" id="1">&nbsp; &nbsp; {{userName}}</span></a></li>
					<br/>
					<li><a href="/fav"><span class='glyphicon glyphicon-star'></span>&nbsp; &nbsp; Favorites</a></li>
					<br/>
				{% else %}
					<li><a href="/accounts/login" ><span class='glyphicon glyphicon-user' ></span><span  class="userName" id="0">&nbsp; &nbsp; Sign In</span></a></li>
					<br/>
					<li><a href="/accounts/add" ><span class  = 'glyphicon glyphicon-plus'></span><span >&nbsp; &nbsp; Create Profile</span></a></li>
					<br/>
				{% endif %}



				{% if user.is_authenticated %}
					<li><a href="/accounts/logout"><span class  = 'glyphicon glyphicon-minus-sign'></span>&nbsp; &nbsp; logout</a></li>
					<br/>
				{% else %}
				{% endif %}
				<br/><br/>
				<li><a href="/about"><span class  = 'glyphicon glyphicon-unchecked'></span>&nbsp; &nbsp; About Us</a></li>
				<br/>
				<li><a href="/feedback"><span class  = 'glyphicon glyphicon-send'></span>&nbsp; &nbsp; Send Feedback</a></li>
				<br/>

			</ul>
		</div>
		<!--Brand name-->
		<img class = "goToIndex" src="{{STATIC_URL}}Kefi.png" alt="Kefi" width="60.4px" height="25px">
	  </div>

	    <ul class="nav navbar-nav pull-right navbar-right">
		  <li class="dropdown">
			<a href="#search" class="dropdown-toggle findClick" data-toggle="dropdown" style="color:#fff;">
				<span class  = 'glyphicon glyphicon-search'></span>
			</a>
			<div class="dropdown-menu noClick" style="padding-left: 5px; padding-right: 5px;">
				<form action={% url "places:index" %} method="post" accept-charset="UTF-8">
				{% csrf_token %}
					<div class='input-group'><input style="width:250px;" type="text" name="search" class="form-control" id="searchTerm" placeholder="Search:">
						<span class="input-group-btn"><input class="btn btn-default" type="submit" value="go"></span>
					</div>

					<div class="form-group hidden">
						<textarea class="form-control insertLoc" id="position" name="position" rows="4"></textarea>
					</div>
				</form>

			</div>
		  </li>

		  <li >
			<a href="#tagSearch" class="dropdown-toggle" data-toggle="modal" data-target="#tagModal">
				<span class='hashtag' style="font-size:18px; color:#fff;">#</span>
			</a>
		  </li>

		{% if headerUIAdditions %}
		<!--		
		  <li class="dropdown">
			<a href="#sort" class="dropdown-toggle" data-toggle="dropdown"><span class  = 'glyphicon glyphicon-sort-by-attributes-alt'></span></a>
			<div class="dropdown-menu" style="padding-left: 5px; padding-right: 5px; width:223px;">
			  	
			  	<form action={% url "places:getCurLoc" %} method="post" accept-charset="UTF-8">
			  		{% csrf_token %}

			  		<div class="sortMethod">
						<input name='sortMethod' type="checkbox" class="h4 hidden " value="tagFilter"> Filter by tag
						
					</div>

					<div class="sortMethod">
						<input name='sortMethod' type="checkbox" class="h4 hidden " value="distSort"> Sort by distance
						
					</div>

			  		<div class="btn-group" data-toggle="buttons">
			  			<label class="btn btn-xs btn-primary">
			  				<input type='radio' class="sortMethod" name="sortMethod" value="0">Best Match<br/>
			  			</label>

			  			<label class="btn btn-xs btn-primary">
			  				<input type='radio' class="sortMethod" name="sortMethod" value="1"> Sort By distance <br/>
			  			</label>

			  			<label class="btn btn-xs btn-primary">
			  				<input type='radio' class="sortMethod" name="sortMethod" value="2">By rating
			  			</label>
			  		</div>
			  	</br></br>
			  		<div class="form-group">
						<button type="submit" id='submitButton' class="btn btn-primary btn-xs" name="submit_tags_form">Submit</button>
					</div>
				</form>
			</div>
		  </li>
		-->
		{% endif %}

	  </ul>

		<form action={% url "places:index" %} method="post" accept-charset="UTF-8" id="locationIndex">
			{% csrf_token %}
			<div class="form-group hidden">
				<textarea class="form-control insertLoc" id="position" name="position" rows="4"></textarea>
			</div>
		</form>
	</header>


	<script type="text/javascript">
		
		$(document).ready(function() {	
			$(".mainMenu").css("height", $(window).height()+"px");

			// We need to check if the browser has the correct capabilities.
			if (navigator.geolocation) {
				// If so, get the current position and feed it to exportPosition (or errorPosition if there was a problem)
					navigator.geolocation.getCurrentPosition(LocationForm);
			}

			function LocationForm(position) {
				$('.insertLoc').text(position.coords.latitude + ',' + position.coords.longitude);
				$('#locationForm').submit();
			}

		});


		// Fix input element click problem
  		$('.noClick').click(function(e) {
    		e.stopPropagation();
  		});

  		$('.goToIndex').click(function() {
    		$('#locationIndex').submit()
  		});

	</script>


	
	<div class='content'>
	 {% block content %}{% endblock %}
    </div>

</body>
</html>

